<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Beranda</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" href="/img/unand.png">
  <style>
    .profile-header {
      background: linear-gradient(to right, #4f46e5, #3b82f6);
      color: white;
    }
    .profile-content {
      background: #f9fafb;
      border-radius: 0.5rem;
    }
    .profile-section {
      background: white;
      border-radius: 0.5rem;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }
    .download-link:hover {
      color: #6366f1;
    }
    .container {
      display: flex;
      flex-direction: column;
      margin: 20px;
    }
    .flex-container {
      display: flex;
    }
    .left-column {
      flex: 1;
      padding: 10px;
      background-color: #f0f0f0;
    }
    .right-column {
      flex: 2;
      padding: 10px;
      background-color: #ffffff;
      border-left: 1px solid #ccc;
    }
    ul {
      list-style-type: none;
      padding: 0;
    }
    li a {
      text-decoration: none;
    }
    li a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body class="bg-gray-100">

  <!-- Navigation -->
  <nav class="bg-lime-950 text-white px-4 py-4 flex items-center fixed top-0 left-0 right-0 z-50">
    <div class="flex items-center">
      <img src="/img/unand.png" alt="Logo" class="h-10 w-10 mr-3">
      <a href="#" class="text-xl font-bold">Sistem Informasi KKN</a>
    </div>
    <div class="flex items-center space-x-6 px-10">
      <a href="#" class="hover:text-gray-400 px-5 font-bold">Kelompok Saya</a>
      <a href="#" class="hover:text-gray-400 px-5">Galeri</a>
      <a href="/lokasi" class="hover:text-gray-400 px-5">Lokasi KKN</a>
      <a href="#" class="hover:text-gray-400 px-5">FAQ</a>
    </div>
    <div class="flex items-center ml-auto space-x-5"> 
      <button type="button" class="relative rounded-full bg-gray-800 p-1 text-gray-400 hover:text-white focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800">
        <span class="sr-only">View notifications</span>
        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0" />
        </svg>
      </button>
      <div class="relative ml-5" onclick="openMenu()" onmouseleave="closeMenu()">
        <button type="button" class="relative flex rounded-full bg-gray-800 text-sm focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800" id="user-menu-button" aria-expanded="false" aria-haspopup="true">
          <span class="sr-only">Open user menu</span>
          <img class="h-8 w-8 rounded-full" src="/img/genkai.jpg" alt="">
        </button>
        <div id="user-menu" class="absolute right-0 z-10 mt-0 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none transform opacity-0 scale-95 transition ease-in duration-75" role="menu" aria-orientation="vertical" aria-labelledby="user-menu-button">
          <a href="/mahasiswa/profil" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-300" role="menuitem">Your Profile</a>
          <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-300" role="menuitem">Settings</a>
          <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-300" role="menuitem">Sign out</a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Sidebar and Main Content -->
  <div class="flex mt-20">
    <!-- Sidebar -->
    <div class="w-72 bg-green-800 text-white px-7 py-3 flex flex-col fixed top-0 bottom-0">
      <ul class="flex flex-col space-y-2 mt-16">
        <li>
          <a href="/home" class="flex items-center hover:text-gray-400 py-3">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7 2 2L3 12z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12l-2-2m0 0l-7-7-7 7-2 2l7 7z" />
            </svg>
            <span>Beranda</span>
          </a>
        </li>
        <li>
          <a href="#" class="flex items-center hover:text-gray-400 py-3">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 7v10M5 12h14" />
            </svg>
            <span>Pendaftaran KKN</span>
          </a>
        </li>
        <li>
          <a href="#" class="flex items-center hover:text-gray-400 py-3">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16h8M8 12h8m-6 4H5a2 2 0 00-2 2v3h14v-3a2 2 0 00-2-2H8m6 4v1H5a2 2 0 01-2-2v-3m11 5h6v-3a2 2 0 00-2-2h-2a2 2 0 00-2 2v3m2-7h2a2 2 0 00-2-2h-2a2 2 0 00-2 2h2z" />
            </svg>
            <span>Pembagian Kelompok</span>
          </a>
        </li>
        <li>
          <a href="#" class="flex items-center hover:text-gray-400 py-3">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M12 5v14" />
            </svg>
            <span>Bimbingan Teknis</span>
          </a>
        </li>
        <li class="relative group">
          <a href="#" class="flex items-center  py-3 font-bold bg-lime-700 rounded">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16" />
            </svg>
            <span>Monitoring & Evaluasi</span>
          </a>
          <div class="absolute left-52 top-0 mt-0 w-48 origin-top-right rounded-md bg-green-800 py-1 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity">
            <a href="/mahasiswa/monitoring" class="block px-4 py-2 hover:bg-lime-700">Monitoring</a>
            <a href="/mahasiswa/evaluasi" class="block px-4 py-2 hover:bg-lime-700">Evaluasi</a>
          </div>
        </li>
        <li>
          <a href="/mahasiswa/jurnal" class="flex items-center hover:text-gray-400 py-3">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v8m4-4H8" />
            </svg>
            <span>Jurnal Kegiatan</span>
          </a>
        </li>
        <li>
          <a href="#" class="flex items-center hover:text-gray-400 py-3">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m-4-8h8" />
            </svg>
            <span>Pelaporan & Penilaian</span>
          </a>
        </li>
        <li>
          <a href="/mahasiswa/arsip" class="flex items-center hover:text-gray-400 py-3">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m-4-8h8" />
            </svg>
            <span>Arsip</span>
          </a>
        </li>
        <li>
          <a href="mahasiswa/forumdiskusi" class="flex items-center hover:text-gray-400 py-3">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m-4-8h8" />
            </svg>
            <span>Forum Diskusi</span>
          </a>
        </li>
      </ul>
    </div>

    <div class="flex-grow bg-gray-100 p-5 ml-72">
        <section class="flex flex-col ml-5 w-[95%] max-md:ml-0 max-md:w-full">
          <div class="flex flex-col self-stretch px-5 pt-8 pb-3.5 my-auto w-full bg-green-800 max-md:pl-5 max-md:mt-10 max-md:max-w-full">
            <h2 class="text-4xl text-white max-md:max-w-full">Proker:</h2>
            <div class="flex-container m-3">
              <div class="left-column">
                <ul class="space-y-4"> <% prokers.forEach(proker => { %>
                    <li><a href="#" onclick="showEvaluation('<%= proker.id %>')"><%= proker.nama_proker %></a></li>
                  <% }) %>
                </ul>
              </div>
              <div class="right-column" id="evaluation-content">
                <p>Select a Proker to see its evaluation content.</p>
              </div>
            </div>
          </div>
        </section>
      </div>
      

  <!-- Edit Modal -->
  <div id="editModal" class="fixed z-50 inset-0 overflow-y-auto hidden">
    <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
      <div class="fixed inset-0 transition-opacity" aria-hidden="true">
        <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
      </div>
      <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
      <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
        <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
          <div class="sm:flex sm:items-start">
            <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
              <h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title">Edit Evaluasi</h3>
              <div class="mt-2">
                <textarea id="editContent" rows="4" class="w-full px-3 py-2 text-gray-700 border rounded-lg focus:outline-none" placeholder="Edit your evaluation content here"></textarea>
              </div>
            </div>
          </div>
        </div>
        <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
          <button type="button" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm" onclick="saveEdit()">Save</button>
          <button type="button" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm" onclick="closeEditModal()">Cancel</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    function openMenu() {
      document.getElementById("user-menu").classList.remove("opacity-0", "scale-95");
      document.getElementById("user-menu").classList.add("opacity-100", "scale-100");
    }

    function closeMenu() {
      document.getElementById("user-menu").classList.remove("opacity-100", "scale-100");
      document.getElementById("user-menu").classList.add("opacity-0", "scale-95");
    }

    const prokers = <%- JSON.stringify(prokers) %>;

  let currentProkerId = null;

  function showEvaluation(id) {
    const proker = prokers.find(p => p.id == id);
    if (proker) {
      document.getElementById('evaluation-content').innerHTML = `
        <p>${proker.isi_evaluasi}</p>
        <button class="mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700" onclick="openEditModal('${proker.id}')">Edit</button>
      `;
    }
  }

  function openEditModal(id) {
    currentProkerId = id;
    const proker = prokers.find(p => p.id == id);
    if (proker) {
      document.getElementById('editContent').value = proker.isi_evaluasi;
      document.getElementById('editModal').classList.remove('hidden');
    }
  }

  function closeEditModal() {
    document.getElementById('editModal').classList.add('hidden');
  }

  function saveEdit() {
  const newContent = document.getElementById('editContent').value;
  const proker = prokers.find(p => p.id == currentProkerId);
  if (proker) {
    proker.isi_evaluasi = newContent;
    document.getElementById('editModal').classList.add('hidden');
    showEvaluation(currentProkerId);

    // Update the data on the server
    fetch(`/api/prokers/${currentProkerId}`, {
      method: 'PUT',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ isi_evaluasi: newContent })
    })
    .then(response => response.json())
    .then(updatedProker => {
      // Handle successful update
      console.log('Proker updated successfully', updatedProker);
    })
    .catch(error => {
      // Handle error
      console.error('Error updating proker:', error);
    });
  }
}
  </script>
</body>
</html>